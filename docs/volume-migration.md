# Перенос данных docker volume в локальные каталоги

Скрипт `docker/migrate-volumes.sh` позволяет скопировать содержимое существующих docker volume в каталоги внутри репозитория. По умолчанию файлы будут помещены в `docker/volumes/` рядом с `docker-compose.yml`.

## Использование

```bash
cd docker
./migrate-volumes.sh           # перенос в docker/volumes/
./migrate-volumes.sh /path/... # произвольный каталог назначения
```

Скрипт проверяет наличие следующих volume и, если они существуют, копирует их содержимое:

- `jenkins_home`
- `minio_data`
- `postgres_data`
- `registry_data`

Для копирования используется временный контейнер `alpine:3.19`, поэтому образ будет автоматически скачан при первом запуске (при необходимости).

## После переноса

1. Убедитесь, что каталоги с данными появились в целевой директории (по умолчанию `docker/volumes/*`).
2. Остановите текущие контейнеры: `docker compose down`.
3. Запустите сервисы повторно: `docker compose up -d --build`.
4. Убедитесь, что Jenkins, MLflow и другие сервисы видят прежние данные.
5. Когда подтвердите, что всё работает, удалите старые volume, чтобы не занимали место:
   ```bash
   docker volume rm jenkins_home minio_data postgres_data registry_data
   ```

> ⚠️ Скрипт не удаляет исходные volume автоматически — это нужно сделать вручную после проверки результата.

Каталоги с данными добавлены в `.gitignore`, поэтому они не будут попадать в репозиторий, но останутся под контролем в файловой системе WSL.
